{"version":3,"file":"js/633.f37fb7f1.js","mappings":"iHAAe,WAASA,GAAG,MAAM,CAACC,IAAID,EAAEA,GAAG,IAAIE,IAAIC,GAAG,SAASC,EAAEC,GAAG,IAAIC,EAAEN,EAAEO,IAAIH,GAAGE,EAAEA,EAAEE,KAAKH,GAAGL,EAAES,IAAIL,EAAE,CAACC,KAAKK,IAAI,SAASN,EAAEC,GAAG,IAAIC,EAAEN,EAAEO,IAAIH,GAAGE,IAAID,EAAEC,EAAEK,OAAOL,EAAEM,QAAQP,KAAK,EAAE,GAAGL,EAAES,IAAIL,EAAE,MAAMS,KAAK,SAAST,EAAEC,GAAG,IAAIC,EAAEN,EAAEO,IAAIH,GAAGE,GAAGA,EAAEQ,QAAQC,KAAI,SAASf,GAAGA,EAAEK,OAAMC,EAAEN,EAAEO,IAAI,OAAOD,EAAEQ,QAAQC,KAAI,SAASf,GAAGA,EAAEI,EAAEC,Q,gCCEnT,MAAMW,EAAUC,IAEhB,S,6GCFIC,EAAAA,EAAAA,GAII,OAHJC,MAAM,uFAAqF,EAEzFD,EAAAA,EAAAA,GAA8B,QAAxBC,MAAM,QAAO,UAHrB,G,GAKGA,MAAM,kB,GACJA,MAAM,iB,kBAUNA,MAAM,oB,GAEPA,MAAM,0BACNC,MAAA,0C,GAEAF,EAAAA,EAAAA,GASQ,eARNA,EAAAA,EAAAA,GAOK,YANHA,EAAAA,EAAAA,GAA6D,MAAzDE,MAAA,gBAAqBD,MAAM,4BAC/BD,EAAAA,EAAAA,GAAgC,MAA5BC,MAAM,cAAa,SACvBD,EAAAA,EAAAA,GAAmD,MAA/CC,MAAM,cAAcC,MAAA,gBAAoB,OAE5CF,EAAAA,EAAAA,GAA+B,MAA3BC,MAAM,eAAc,OACxBD,EAAAA,EAAAA,GAA+B,MAA3BC,MAAM,eAAc,UAP5B,G,GAeUA,MAAM,sC,GAkBHA,MAAM,8B,GACJA,MAAM,oB,+DAuCXA,MAAM,e,GAGPD,EAAAA,EAAAA,GAAI,mB,GAIHC,MAAM,e,iBAOND,EAAAA,EAAAA,GAA2B,KAAxBC,MAAM,eAAa,S,GAAtBE,G,GAiBFC,QAAQ,IAAIH,MAAM,uC,GAChBA,MAAM,a,GAIZD,EAAAA,EAAAA,GAAS,mB,GAKZC,MAAM,kC,WAEN,Q,WAMA,O,uHAhJPI,EAAAA,EAAAA,IAA4DC,EAAA,CAA/CC,OAAQC,EAAAA,UAAY,UAAS,KAA1C,mBACEC,GAKFT,EAAAA,EAAAA,GA6IM,MA7IN,EA6IM,EA5IJA,EAAAA,EAAAA,GASM,MATN,EASM,EARJA,EAAAA,EAAAA,GAOS,UANPC,MAAM,yBACNS,KAAK,SACJC,SAA+B,IAArBH,EAAAA,SAASI,MAAMC,OACzBC,QAAK,oBAAEC,EAAAA,eAAAA,EAAAA,iBAAAA,KACT,UAED,EAAAC,MAEFhB,EAAAA,EAAAA,GAsHM,MAtHN,EAsHM,EArHJA,EAAAA,EAAAA,GAoHQ,QApHR,EAoHQ,CAhHNiB,GAUAjB,EAAAA,EAAAA,GAkFQ,cAhFUQ,EAAAA,SAASI,MAAMC,SAAAA,EAAAA,EAAAA,KAAAA,IAC7BK,EAAAA,EAAAA,IA6EKC,EAAAA,GAAA,CAAAC,IAAAA,IAAAC,EAAAA,EAAAA,IA7Ecb,EAAAA,SAASI,OAAjBU,K,WAAXJ,EAAAA,EAAAA,IA6EK,MA7E+BE,IAAKE,EAAKC,IAA9C,EAEEvB,EAAAA,EAAAA,GAUK,KAVL,EAUK,EATHA,EAAAA,EAAAA,GAQO,OAPLC,MAAM,oBACNC,OAIC,SAJD,iFAIC,CAAAsB,gBAAAA,OACiCF,EAAKG,QAAQC,gBAPjD,WAWF1B,EAAAA,EAAAA,GAGK,WAAA2B,EAAAA,EAAAA,IAFAL,EAAKG,QAAQG,OAAK,IAIvB5B,EAAAA,EAAAA,GA+BK,YA9BHA,EAAAA,EAAAA,GA6BM,MA7BN,EA6BM,EA5BJA,EAAAA,EAAAA,GA2BM,MA3BN,EA2BM,WApBJA,EAAAA,EAAAA,GAgBS,UAfP6B,KAAK,GACLN,GAAG,GACHtB,MAAM,c,yBACGqB,EAAKQ,IAAGC,EAChBC,SAAM,GAAEjB,EAAAA,eAAeO,GACvBX,SAAUH,EAAAA,gBAAkBc,EAAKC,GAClCrB,MAAA,gBAPF,cASEgB,EAAAA,EAAAA,IAMSC,EAAAA,GAAA,MAAAE,EAAAA,EAAAA,IAJO,IAAPY,IAFTjC,EAAAA,EAAAA,GAMS,UALNkC,MAAOD,EAEPb,IAAG,GAAKa,IAAMX,EAAKC,OAHtB,QAKKU,GAAG,EAAAE,KALR,MATF,aAIWb,EAAKQ,cA4BtB9B,EAAAA,EAAAA,GAKK,KALL,EAKK,EAJHA,EAAAA,EAAAA,GAEC,aADE,QAAI2B,EAAAA,EAAAA,IAAGL,EAAKG,QAAQW,OAAO,IAAC,GAC9BC,GAEE,QAFE,QACFV,EAAAA,EAAAA,IAAGL,EAAKgB,OAAQ,KACrB,MAEAtC,EAAAA,EAAAA,GASK,KATL,EASK,EARHA,EAAAA,EAAAA,GAOS,UANPU,KAAK,SACLT,MAAM,uBACLa,QAAK,GAAEC,EAAAA,eAAeO,EAAKC,KAH9B,cApEJ,yBAgFJvB,EAAAA,EAAAA,GAkBQ,eATNA,EAAAA,EAAAA,GAQK,YANHA,EAAAA,EAAAA,GAIK,KAJL,EAIK,EAHHA,EAAAA,EAAAA,GAEK,KAFL,EAAsB,QACjB2B,EAAAA,EAAAA,IAAGnB,EAAAA,SAAS8B,OAAQ,KACzB,KAEFC,WAKRvC,EAAAA,EAAAA,GAUM,MAVN,EAUM,EATJK,EAAAA,EAAAA,IAECmC,EAAA,CAFYC,GAAG,YAAYxC,MAAM,sCAAlC,C,kBACG,IAAI,M,OAEPI,EAAAA,EAAAA,IAKCmC,EAAA,CAJCC,GAAG,aACHxC,OAAK,SAAC,oCAAmC,CAAAU,SACA,IAArBH,EAAAA,SAASI,MAAMC,WAHrC,C,kBAIG,IAAG,M,KAJN,kBAtIJ,I,cAiJF,GACE6B,OACE,MAAO,CACLC,SAAU,CACR/B,MAAO,IAETgC,cAAe,GACfC,WAAW,EACXC,iBAAkB,IAGtBC,QAAS,CACPC,UACEC,KAAKJ,WAAY,EACjB,MAAMK,EAAO,wDACbD,KAAKE,MACF9D,IAAI6D,GACJE,MAAMC,IAELJ,KAAKN,SAAWU,EAAIX,KAAKA,KAEzB,MAAMY,EAAYL,KAAKN,SAAS/B,MAC1B2C,EAASD,EAAUE,QAAO,SAAUC,EAAKnC,GAC7C,OACEmC,EAAMC,SAASpC,EAAKG,QAAQkC,cAAgBD,SAASpC,EAAKQ,OAE3D,GACHmB,KAAKW,mBAAqBL,EAE1BN,KAAKJ,WAAY,MAMvBgB,eAAgBtC,GACd0B,KAAKL,cAAgBrB,EACrB,MAAM2B,EAAO,yDAAiE3B,IAC9E0B,KAAKL,cAAgB,GACrBK,KAAKE,MACFW,OAAOZ,GACPE,MAAMC,IAELJ,KAAKc,UAAU,CAAEC,KAAM,UAAWpC,MAAQ,GAAEyB,EAAIX,KAAKuB,YACrDnE,EAAAA,EAAAA,KAAa,YACbmD,KAAKD,aAENkB,OAAOC,IACNlB,KAAKc,UAAU,CAAEC,KAAM,QAASpC,MAAQ,GAAEuC,EAAIF,gBAIpDG,eAAgB9C,GACd,MAAMoB,EAAO,CACX2B,WAAY/C,EAAKC,GACjBO,IAAKR,EAAKQ,KAEZmB,KAAKL,cAAgBtB,EAAKC,GAC1B,MAAM2B,EAAO,yDAAiE5B,EAAKC,KACnF0B,KAAKE,MACFmB,IAAIpB,EAAK,CAAER,KAAAA,IACXU,MAAMC,IAELJ,KAAKD,UACLlD,EAAAA,EAAAA,KAAa,YACbmD,KAAKc,UAAU,CAAEC,KAAM,UAAWpC,MAAQ,GAAEyB,EAAIX,KAAKuB,YACrDhB,KAAKL,cAAgB,MAEtBsB,OAAOC,IACNlB,KAAKc,UAAU,CAAEC,KAAM,QAASpC,MAAQ,GAAEuC,EAAIF,YAE9ChB,KAAKL,cAAgB,OAG3B2B,gBACEtB,KAAKJ,WAAY,EACjB,MAAMK,EAAO,yDACbD,KAAKE,MACFW,OAAOZ,GACPE,MAAMC,IACLJ,KAAKc,UAAU,CAAEC,KAAM,UAAWpC,MAAQ,GAAEyB,EAAIX,KAAKuB,YAErDhB,KAAKD,UACLlD,EAAAA,EAAAA,KAAa,YACbmD,KAAKJ,WAAY,KAElBqB,OAAOC,IACNK,MAAML,EAAIzB,KAAKuB,aAGrBF,UAAWE,GAEThB,KAAKwB,MAAMR,KAGfS,UACEzB,KAAKD,UACL2B,OAAOC,OAAO,EAAG,K,UCpPrB,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE","sources":["webpack://two-cakes/./node_modules/mitt/dist/mitt.mjs","webpack://two-cakes/./src/utils/emitter.js","webpack://two-cakes/./src/views/CartView.vue","webpack://two-cakes/./src/views/CartView.vue?73a2"],"sourcesContent":["export default function(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e)}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.mjs.map\n","import mitt from 'mitt'\r\n\r\nconst emitter = mitt()\r\n\r\nexport default emitter\r\n","<template>\r\n  <LoadingVue :active=\"isLoading\" :z-index=\"100\"></LoadingVue>\r\n    <div\r\n    class=\"banner cart-banner container-fluid d-flex align-items-center justify-content-center\"\r\n  >\r\n      <span class=\"fs-1\">Cart</span>\r\n  </div>\r\n  <div class=\"container mb-7\">\r\n    <div class=\"text-end pt-5\">\r\n      <button\r\n        class=\"btn btn-outline-danger\"\r\n        type=\"button\"\r\n        :disabled=\"cartData.carts.length === 0\"\r\n        @click=\"removeAllCart\"\r\n      >\r\n        清空購物車\r\n      </button>\r\n    </div>\r\n    <div class=\"table-responsive\">\r\n      <table\r\n        class=\"table align-middle mt-3\"\r\n        style=\"padding-right: 0; padding-left: 0\"\r\n      >\r\n        <thead>\r\n          <tr>\r\n            <th style=\"width: 150px\" class=\"d-none d-sm-table-cell\"></th>\r\n            <th class=\"text-start\">產品名稱</th>\r\n            <th class=\"text-center\" style=\"width: 50px\">數量</th>\r\n            <!-- <th class=\"text-center\">單價</th> -->\r\n            <th class=\"text-center\">價格</th>\r\n            <th class=\"text-center\">刪除</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <!-- 判斷購物車資料有沒有存在 -->\r\n          <template v-if=\"cartData.carts.length\">\r\n            <tr v-for=\"item in cartData.carts\" :key=\"item.id\">\r\n              <!-- 商品圖 -->\r\n              <td class=\"text-center d-none d-sm-table-cell\">\r\n                <div\r\n                  class=\"d-none d-sm-block\"\r\n                  style=\"\r\n                    height: 150px;\r\n                    background-size: cover;\r\n                    background-position: center center;\r\n                  \"\r\n                  :style=\"{ backgroundImage: `url(${item.product.imageUrl})` }\"\r\n                ></div>\r\n              </td>\r\n              <!-- 商品名稱 -->\r\n              <td>\r\n                {{ item.product.title }}\r\n                <!-- <div class=\"text-success\">已套用優惠券</div> -->\r\n              </td>\r\n              <!-- 商品數量 -->\r\n              <td>\r\n                <div class=\"input-group input-group-sm\">\r\n                  <div class=\"input-group mb-3\">\r\n                    <!-- <input\r\n                          min=\"1\"\r\n                          type=\"number\"\r\n                          class=\"form-control\"\r\n                          v-model.number=\"item.qty\"\r\n                        /> -->\r\n                    <select\r\n                      name=\"\"\r\n                      id=\"\"\r\n                      class=\"form-select\"\r\n                      v-model=\"item.qty\"\r\n                      @change=\"updateCartItem(item)\"\r\n                      :disabled=\"isLoadingItem === item.id\"\r\n                      style=\"width:70px;\"\r\n                    >\r\n                      <option\r\n                        :value=\"num\"\r\n                        v-for=\"num in 20\"\r\n                        :key=\"`${num}${item.id}`\"\r\n                      >\r\n                        {{ num }}\r\n                      </option>\r\n                    </select>\r\n                    <!-- <span class=\"input-group-text\" id=\"basic-addon2\">{{\r\n                      item.product.unit\r\n                    }}</span> -->\r\n                  </div>\r\n                </div>\r\n              </td>\r\n              <!-- 商品單價 -->\r\n              <!-- <td class=\"text-center\"> -->\r\n                <!-- <del class=\"fs-6\">{{\r\n                $filters.currency(item.product.origin_price)\r\n              }}</del>\r\n              元 <br> -->\r\n                <!-- <span class=\"text-danger\">折扣價：</span> -->\r\n              <!-- </td> -->\r\n              <!-- 商品總價 -->\r\n              <td class=\"text-center\">\r\n                <small\r\n                  >單價： {{ item.product.price}}元</small\r\n                ><br>\r\n                合計：{{ item.total }}元\r\n              </td>\r\n              <!-- 刪除紐 -->\r\n              <td class=\"text-center\">\r\n                <button\r\n                  type=\"button\"\r\n                  class=\"btn text-danger fs-4\"\r\n                  @click=\"removeCartItem(item.id)\"\r\n                >\r\n                  <!-- <i class=\"fas fa-spinner fa-pulse\"></i> -->\r\n                  <i class=\"bi bi-trash\"></i>\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          </template>\r\n        </tbody>\r\n        <tfoot>\r\n          <!-- <tr>\r\n          <td colspan=\"4\" class=\"text-end\">原價總計</td>\r\n          <td class=\"text-end\">\r\n            <del>{{ $filters.currency(originalPriceTotal) }}</del\r\n            >元\r\n          </td>\r\n          <td></td>\r\n        </tr> -->\r\n          <tr>\r\n            <!-- <td colspan=\"4\" class=\"text-end text-danger fw-bolder\"><h3>折扣價總計</h3></td> -->\r\n            <td colspan=\"6\" class=\"text-end text-danger fw-bolder pt-3\">\r\n              <h3 class=\"fw-bolder\">\r\n                總價 {{ cartData.total }}元\r\n              </h3>\r\n            </td>\r\n            <td></td>\r\n          </tr>\r\n        </tfoot>\r\n      </table>\r\n    </div>\r\n    <div class=\"d-flex justify-content-between\">\r\n      <router-link to=\"/products\" class=\"btn more-btn btn-lg mt-3 fw-bolder\"\r\n        >繼續選購</router-link\r\n      >\r\n      <router-link\r\n        to=\"/orderform\"\r\n        class=\"btn add-btn btn-lg mt-3 fw-bolder\"\r\n        :class=\"{ disabled: cartData.carts.length === 0 }\"\r\n        >下一步</router-link\r\n      >\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport emitter from '@/utils/emitter'\r\nexport default {\r\n  data () {\r\n    return {\r\n      cartData: {\r\n        carts: []\r\n      },\r\n      isLoadingItem: '',\r\n      isLoading: false,\r\n      originPriceTotal: 0\r\n    }\r\n  },\r\n  methods: {\r\n    getCart () {\r\n      this.isLoading = true\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      this.$http\r\n        .get(url)\r\n        .then((res) => {\r\n          // console.log(res)\r\n          this.cartData = res.data.data\r\n          // console.log(this.cartData.carts.length)\r\n          const cartItems = this.cartData.carts\r\n          const amount = cartItems.reduce(function (acc, item) {\r\n            return (\r\n              acc + parseInt(item.product.origin_price) * parseInt(item.qty)\r\n            )\r\n          }, 0)\r\n          this.originalPriceTotal = amount\r\n          // console.log(amount)\r\n          this.isLoading = false\r\n        })\r\n        // .catch((err) => {\r\n        //   console.log(err.message)\r\n        // })\r\n    },\r\n    removeCartItem (id) {\r\n      this.isLoadingItem = id\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`\r\n      this.isLoadingItem = ''\r\n      this.$http\r\n        .delete(url)\r\n        .then((res) => {\r\n          // console.log(res)\r\n          this.showAlert({ icon: 'success', title: `${res.data.message}` })\r\n          emitter.emit('get-cart')\r\n          this.getCart()\r\n        })\r\n        .catch((err) => {\r\n          this.showAlert({ icon: 'error', title: `${err.message}` })\r\n          // alert(err.data.message)\r\n        })\r\n    },\r\n    updateCartItem (item) {\r\n      const data = {\r\n        product_id: item.id,\r\n        qty: item.qty\r\n      }\r\n      this.isLoadingItem = item.id\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`\r\n      this.$http\r\n        .put(url, { data })\r\n        .then((res) => {\r\n          // console.log(res)\r\n          this.getCart()\r\n          emitter.emit('get-cart')\r\n          this.showAlert({ icon: 'success', title: `${res.data.message}` })\r\n          this.isLoadingItem = ''\r\n        })\r\n        .catch((err) => {\r\n          this.showAlert({ icon: 'error', title: `${err.message}` })\r\n          // alert(err.data.message)\r\n          this.isLoadingItem = ''\r\n        })\r\n    },\r\n    removeAllCart () {\r\n      this.isLoading = true\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/carts`\r\n      this.$http\r\n        .delete(url)\r\n        .then((res) => {\r\n          this.showAlert({ icon: 'success', title: `${res.data.message}` })\r\n          // alert(res.data.message)\r\n          this.getCart()\r\n          emitter.emit('get-cart')\r\n          this.isLoading = false\r\n        })\r\n        .catch((err) => {\r\n          alert(err.data.message)\r\n        })\r\n    },\r\n    showAlert (message) {\r\n      // Use sweetalert2\r\n      this.$swal(message)\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getCart()\r\n    window.scroll(0, 0)\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./CartView.vue?vue&type=template&id=60954fa6\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\twoCakes\\\\two-cakes\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["n","all","Map","on","t","e","i","get","push","set","off","splice","indexOf","emit","slice","map","emitter","mitt","_createElementVNode","class","style","_hoisted_17","colspan","_createVNode","_component_LoadingVue","active","$data","_hoisted_1","type","disabled","carts","length","onClick","$options","_hoisted_4","_hoisted_7","_createElementBlock","_Fragment","key","_renderList","item","id","backgroundImage","product","imageUrl","_toDisplayString","title","name","qty","$event","onChange","num","value","_hoisted_12","price","_hoisted_14","total","_hoisted_21","_component_router_link","to","data","cartData","isLoadingItem","isLoading","originPriceTotal","methods","getCart","this","url","$http","then","res","cartItems","amount","reduce","acc","parseInt","origin_price","originalPriceTotal","removeCartItem","delete","showAlert","icon","message","catch","err","updateCartItem","product_id","put","removeAllCart","alert","$swal","mounted","window","scroll","__exports__","render"],"sourceRoot":""}