"use strict";(self["webpackChunktwo_cakes"]=self["webpackChunktwo_cakes"]||[]).push([[254],{3041:function(e,t,s){function a(e){return{all:e=e||new Map,on:function(t,s){var a=e.get(t);a?a.push(s):e.set(t,[s])},off:function(t,s){var a=e.get(t);a&&(s?a.splice(a.indexOf(s)>>>0,1):e.set(t,[]))},emit:function(t,s){var a=e.get(t);a&&a.slice().map((function(e){e(s)})),(a=e.get("*"))&&a.slice().map((function(e){e(t,s)}))}}}s.d(t,{Z:function(){return i}});const l=a();var i=l},6254:function(e,t,s){s.r(t),s.d(t,{default:function(){return A}});var a=s(6252),l=s(3577),i=s(9963);const o=(0,a.uE)('<div class="container mt-7"><div class="row row-cols-3 row-cols-sm-3"><div class="col text-center"><div class="check-step check-step-finished d-flex flex-column justify-content-center"><i class="bi bi-check2-circle check-step-icon"></i><span>STEP 1</span><span>確認訂單</span></div></div><div class="col text-center"><div class="check-step d-flex flex-column justify-content-center"><i class="bi bi-dash-circle-dotted check-step-icon"></i><span>STEP 2</span><span>建立訂單</span></div></div><div class="col text-center"><div class="check-step d-flex flex-column justify-content-center"><i class="bi bi-dash-circle-dotted check-step-icon"></i><span>STEP 3</span><span>完成訂單</span></div></div></div></div>',1),c={class:"container my-7"},n={class:"row"},r={class:"col-12 col-md-6 pe-md-5"},d=(0,a._)("h3",{class:"mb-3 fw-bold"},"確認訂單內容",-1),m={class:"table align-middle"},u=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{style:{width:"100px"}}),(0,a._)("th",{style:{width:"150px"}},"品名"),(0,a._)("th",{style:{width:"150px"},class:"text-center"},"單價")])],-1),h={class:"py-3"},p=(0,a._)("br",null,null,-1),f={class:"text-center py-3"},b={colspan:"4",class:"text-end"},v={key:0},_={colspan:"4",class:"text-end text-danger fw-bolder fs-4"},g={class:"col-12 col-md-6 ps-md-5 justify-content-center"},w=(0,a._)("h3",{class:"mb-3 fw-bold"},"填寫訂購資訊",-1),k={class:"mb-3"},x=(0,a._)("label",{for:"email",class:"form-label"},"Email",-1),y={class:"mb-3"},D=(0,a._)("label",{for:"name",class:"form-label"},"收件人姓名",-1),V={class:"mb-3"},C=(0,a._)("label",{for:"tel",class:"form-label"},"收件人電話",-1),$={class:"mb-3"},L=(0,a._)("label",{for:"address",class:"form-label"},"收件人地址",-1),W={class:"mb-3"},z=(0,a._)("label",{for:"message",class:"form-label"},"留言",-1),U={class:"text-end"},j=["disabled"];function q(e,t,s,q,E,O){const S=(0,a.up)("LoadingVue"),P=(0,a.up)("v-field"),A=(0,a.up)("error-message"),I=(0,a.up)("v-form");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(S,{active:E.isLoading,"z-index":100},null,8,["active"]),o,(0,a._)("div",c,[(0,a._)("div",n,[(0,a._)("div",r,[d,(0,a._)("table",m,[u,(0,a._)("tbody",null,[E.cartData.carts?((0,a.wg)(!0),(0,a.iD)(a.HY,{key:0},(0,a.Ko)(E.cartData.carts,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("td",null,[(0,a._)("div",{style:(0,l.j5)([{height:"100px","background-size":"cover","background-position":"center center"},{backgroundImage:`url(${e.product.imageUrl})`}])},null,4)]),(0,a._)("td",h,[(0,a.Uk)((0,l.zw)(e.product.title),1),p,(0,a._)("small",null,"數量 "+(0,l.zw)(e.qty)+" 隻",1)]),(0,a._)("td",f,(0,l.zw)(e.product.price)+" 元 ",1)])))),128)):(0,a.kq)("",!0)]),(0,a._)("tfoot",null,[(0,a._)("tr",null,[(0,a._)("td",b,"總計 "+(0,l.zw)(E.cartData.total)+" 元",1)]),E.cartData.final_total!==E.cartData.total?((0,a.wg)(),(0,a.iD)("tr",v,[(0,a._)("td",_," 優惠後總金額 "+(0,l.zw)(E.cartData.final_total)+" 元 ",1)])):(0,a.kq)("",!0)])])]),(0,a._)("div",g,[w,(0,a.Wm)(I,{ref:"form",onSubmit:O.submitOrders},{default:(0,a.w5)((({errors:e})=>[(0,a._)("div",k,[x,(0,a.Wm)(P,{id:"email",name:"email",type:"email",class:(0,l.C_)(["form-control",{"is-invalid":e["email"]}]),rules:"email|required",placeholder:"請輸入 Email",modelValue:E.form.user.email,"onUpdate:modelValue":t[0]||(t[0]=e=>E.form.user.email=e)},null,8,["class","modelValue"]),(0,a.Wm)(A,{name:"email",class:"invalid-feedback"})]),(0,a._)("div",y,[D,(0,a.Wm)(P,{id:"name",name:"姓名",type:"text",class:(0,l.C_)(["form-control",{"is-invalid":e["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:E.form.user.name,"onUpdate:modelValue":t[1]||(t[1]=e=>E.form.user.name=e)},null,8,["class","modelValue"]),(0,a.Wm)(A,{name:"姓名",class:"invalid-feedback"})]),(0,a._)("div",V,[C,(0,a.Wm)(P,{id:"tel",name:"電話",type:"text",class:(0,l.C_)(["form-control",{"is-invalid":e["電話"]}]),rules:O.isPhone,placeholder:"請輸入電話",modelValue:E.form.user.tel,"onUpdate:modelValue":t[2]||(t[2]=e=>E.form.user.tel=e)},null,8,["rules","class","modelValue"]),(0,a.Wm)(A,{name:"電話",class:"invalid-feedback"})]),(0,a._)("div",$,[L,(0,a.Wm)(P,{id:"address",name:"地址",type:"text",class:(0,l.C_)(["form-control",{"is-invalid":e["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:E.form.user.address,"onUpdate:modelValue":t[3]||(t[3]=e=>E.form.user.address=e)},null,8,["class","modelValue"]),(0,a.Wm)(A,{name:"地址",class:"invalid-feedback"})]),(0,a._)("div",W,[z,(0,a.wy)((0,a._)("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[4]||(t[4]=e=>E.form.message=e)},null,512),[[i.nr,E.form.message]])]),(0,a._)("div",U,[(0,a._)("button",{type:"submit",class:"btn btn-lg w-100 bg-primary text-white",onSubmit:t[5]||(t[5]=(...e)=>O.submitOrders&&O.submitOrders(...e)),disabled:Object.keys(e).length>0}," 送出訂單 ",40,j)])])),_:1},8,["onSubmit"])])])])],64)}var E=s(3041),O={data(){return{cartData:{},isLoadingItem:"",form:{user:{name:"",email:"",tel:"",address:""},message:""},coupon_code:"twocakes",isDiscount:!1,isLoading:!1}},watch:{"cartData.total":function(){this.cartData.total===this.cartData.final_total?this.isDiscount=!1:(this.isDiscount=!0,this.coupon_code="已經輸入過優惠碼")}},methods:{isPhone(e){const t=/^(09)[0-9]{8}$/;return!!t.test(e)||"需要正確的電話號碼"},getCart(){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/v2/api/phil/cart";this.$http.get(e).then((e=>{this.cartData=e.data.data,this.isLoading=!1})).catch((e=>{console.log(e.message)}))},submitOrders(){const e="https://vue3-course-api.hexschool.io/v2/api/phil/order",t=this.form;this.$http.post(e,{data:t}).then((e=>{this.showAlert({icon:"success",title:`${e.data.message}`}),this.isLoadingItem="",this.getCart(),this.$refs.form.resetForm(),this.form.message="",E.Z.emit("get-cart"),this.$router.push(`/checkout/${e.data.orderId}`)})).catch((e=>{console.log(e.message)}))},addCouponCode(){const e="https://vue3-course-api.hexschool.io/v2/api/phil/coupon",t={code:this.coupon_code};this.isLoading=!0,this.$http.post(e,{data:t}).then((e=>{this.getCart(),this.showAlert({icon:"success",title:`${e.data.message}`}),this.coupon_code="",this.isDiscount=!0,this.isLoading=!1})).catch((e=>{this.isLoading=!1,this.showAlert({icon:"error",title:"您輸入無效的優惠碼！"}),console.dir(e)}))},showAlert(e){this.$swal(e)}},mounted(){this.getCart(),window.scroll(0,0)}},S=s(3744);const P=(0,S.Z)(O,[["render",q]]);var A=P}}]);
//# sourceMappingURL=254.a08b1a6a.js.map